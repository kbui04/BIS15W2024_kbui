knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
library(tidyverse)
library(janitor)
import.packages(skimr)
library(tidyverse)
library(janitor)
import.package(skimr)
library(tidyverse)
library(janitor)
install.packages(skimr)
library(skimr)
library(tidyverse)
library(janitor)
install.packages(skimr)
library(skimr)
library(tidyverse)
library(janitor)
install.packages("skimr")
library(skimr)
library(tidyverse)
library(janitor)
install.packages("skimr")
library(skimr)
library(tidyverse)
library(janitor)
install.packages("C:/Users/cukyb/Desktop/BIS15W2024_kbui/lab7/skimr_2.1.5.tar.gz", repos = NULL, type="source")
library(skimr)
fisheries <- readr::read_csv(file = "data/FAO_1950to2012_111914.csv")
glimpse(fisheries)
glimpse(fisheries)
sum(is.na(fisheries))
glimpse(fisheries)
sum(is.na(fisheries))
colnames(fisheries)
dim(fisheries)
janitor(fisheries)
levels(fisheries)
levels(fisheries$Country)
clean.names(fisheries)
clean.name(fisheries)
clean_names(fisheries)
clean_names(fisheries)
factor(fisheries, country, isscaap_group_number, asfis_species_number, fao_major_fishing_area)
clean_names(fisheries)
factor(fisheries, country, isscaap_group_number, asfis_species_number, fao_major_fishing_area)
glimpse(fisheries)
sum(is.na(fisheries))
colnames(fisheries)
dim(fisheries)
class(fisheries)
glimpse(fisheries)
sum(is.na(fisheries))
colnames(fisheries)
dim(fisheries)
str(fisheries)
clean_names(fisheries)
factor(fisheries, levels=c(country, isscaap_group_number, asfis_species_number, fao_major_fishing_area))
clean_names(fisheries)
factor(fisheries, levels=c(country, isscaap_group_number, asfis_species_number, fao_major_fishing_area))
clean_names(fisheries)
factor(fisheries, levels=c("country", "isscaap_group_number", "asfis_species_number", "fao_major_fishing_area"))
clean_names(fisheries)
fisheries <- factor(fisheries)
fisheries %>%
clean_names() %>%
factor()
fisheries %>%
clean_names() %>%
factor(country, isscap_group_number, asfis_species_number, fao_major_fishing_area)
fisheries %>%
clean_names() %>%
factor(country, isscap_group_number, asfis_species_number)
fisheries %>%
clean_names() %>%
factor(isscap_group_number, asfis_species_number)
fisheries %>%
clean_names()
fisheries <- fisheries %>%
clean_names() %>%
factor(country, isscap_group_number, asfis_species_number, fao_major_fishing_Area)
fisheries <- fisheries %>%
clean_names() %>%
factor(country, isscap_group_number, asfis_species_number, fao_major_fishing_area)
fisheries_new <- fisheries %>%
clean_names() %>%
factor(country, isscap_group_number, asfis_species_number, fao_major_fishing_area)
fisheries_new <- clean_names(fisheries)
factor(fisheries_new, country, isscap_group_number, asfis_species_number, fao_major_fishing_area)
fisheries_new <- clean_names(fisheries)
factor(fisheries_new, fisheries_new$country, fisheries_new$isscap_group_number, fisheries_new$asfis_species_number, fisheries_new$fao_major_fishing_area)
fisheries %>%
clean_names() %>%
mutate(country = factor(country), isscaap_group_number = factor(isscaap_group_number), asfis_species_number = factor(asfis_species_number), fao_major_fishing_area = factor(fao_major_fishing_area))
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,#asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfi#s_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries <- fisheries %>%
clean_names() %>%
mutate(country = factor(country), isscaap_group_number = factor(isscaap_group_number), asfis_species_number = factor(asfis_species_number), fao_major_fishing_area = factor(fao_major_fishing_area))
fisheries <- fisheries %>%
clean_names() %>%
mutate(country = factor(country), isscaap_group_number = factor(isscaap_group_number), asfis_species_number = factor(asfis_species_number), fao_major_fishing_area = factor(fao_major_fishing_area))
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
tabyl(fisheries_tidy$country)
select(fisheries_tidy, country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
tabyl(fisheries_tidy$asfis_species_number)
fisheries_tidy <- select(fisheries_tidy, country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
count(fisheries_tidy$asfis_species_number)
n(fisheries_tidy$asfis_species_number)
summarize(fisheries_tidy, n = n(asfis_species_number))
summarize(fisheries_tidy, total(asfis_species_number))
summarize(fisheries_tidy, count(asfis_species_number))
summarize(fisheries_tidy$asfis_species_number)
penguins %>%
group_by(island) %>%
summarize(mean_body_mass = mean(body_mass_g), mean_bill_length = mean(bill_depth_mm), total = n())
summarize(total = n(fisheries_tidy$asfis_species_number))
summarize(fisheries_tidy, species_number = asfis_species_number, total = n())
summarize(species_number = fisheries_tidy$asfis_species_number, total = n())
summarize(fisheries_tidy, species_number = asfis_species_number, total = n())
count(fisheries_tidy, sort = T)
fisheries_tidy %>%
group_by(asfis_species_number) %>%
count(sort = T)
fisheries_tidy %>%
group_by(asfis_species_number)
fisheries_tidy %>%
group_by(asfis_species_number) %>%
summarize(n=n())
fisheries_tidy %>%
group_by(asfis_species_number) %>%
tabyl(asfis_species_number)
fisheries_tidy %>%
group_by(asfis_species_number) %>%
n_groups(asfis_species_number)
fisheries_tidy %>%
group_by(asfis_species_number) %>%
n_groups()
tabyl(fisheries_tidy$country)
n_groups(fisheries_tidy$country)
tabyl(fisheries_tidy$country)
group_size(fisheries_tidy$country)
fisheries_tidy %>%
tabyl(country)
group_size(country)
fisheries_tidy %>%
tabyl(country)
group_by(country)
fisheries_tidy %>%
tabyl(country) %>%
group_by(country) %>%
group_size()
fisheries_tidy %>%
group_by(country) %>%
group_size()
fisheries_tidy %>%
group_by(country) %>%
n_groups()
fisheries_tidy %>%
tabyl(country) %>%
group_by(country) %>%
n_groups()
fisheries_tidy %>%
group_by(country) %>%
n_groups()
tabyl(fisheries_tidy$country)
summary(fisheries_tidy)
fisheries_tidy %>%
group_by(quantity) %>%
fisheries_tidy %>%
sort(desc(catch))
summary(fisheres_tidy)
summary(fisheries_tidy)
fisheries_tidy %>%
sort(desc(catch))
summary(fisheries_tidy)
fisheries_tidy %>%
sort(catch, decreasing = TRUE)
summary(fisheries_tidy)
fisheries_tidy %>%
group_by(catch) %>%
sort(decreasing = TRUE)
fisheries_tidy %>%
arrange(desc(catch))
fisheries_tidy %>%
arrange(desc(sum(catch)))
fisheries_tidy %>%
select(country, catch) %>%
arrange(desc(sum(catch)))
fisheries_tidy %>%
select(country, catch) %>%
group_by(country) %>%
arrange(desc(sum(catch)))
fisheries_tidy %>%
select(country, catch) %>%
group_by(country) %>%
sum(catch)
fisheries_tidy %>%
select(country, catch) %>%
group_by(country) %>%
arrange(desc(catch))
fisheries_tidy %>%
select(country, catch) %>%
group_by(country) %>%
summarise(country)
fisheries_tidy %>%
select(country, catch) %>%
group_by(country) %>%
summarise(catch)
fisheries_tidy %>%
select(country, catch) %>%
group_by(country) %>%
summarise(total_catch = sum(catch, na.rm = TRUE))
fisheries_tidy %>%
select(country, catch) %>%
group_by(country) %>%
summarise(total_catch = desc(sum(catch, na.rm = TRUE)))
fisheries_tidy %>%
select(country, catch) %>%
group_by(country) %>%
summarise(total_catch = ascending(sum(catch, na.rm = TRUE)))
fisheries_tidy %>%
select(country, catch) %>%
group_by(country) %>%
summarise(total_catch = ascend(sum(catch, na.rm = TRUE)))
fisheries_tidy %>%
select(country, catch) %>%
group_by(country) %>%
summarise(total_catch = desc(desc((sum(catch, na.rm = TRUE)))))
fisheries_tidy %>%
select(country, catch) %>%
group_by(country) %>%
summarise(total_catch = arrange(desc(sum(catch, na.rm = TRUE))))
fisheries_tidy %>%
select(country, catch) %>%
group_by(country) %>%
summarise(total_catch = sum(catch, na.rm = TRUE))
fisheries_tidy %>%
select(country, catch) %>%
group_by(country) %>%
summarise(total_catch = sum(catch, na.rm = TRUE)) %>%
arrange(desc(total_catch))
fisheries_tidy %>%
filter(asspecies_taxonomic_name == "Sardinia pilchardus")
fisheries_tidy %>%
filter(asfispecies_taxonomic_name == "Sardinia pilchardus")
fisheries_tidy %>%
filter(asfisspecies_taxonomic_name == "Sardinia pilchardus")
fisheries_tidy %>%
filter(asfis_species_name == "Sardinia pilchardus")
fisheries_tidy %>%
filter(isscaap_taxonomic_group == "Sardinia pilchardus")
fisheries_tidy %>%
filter(asfis_species_name == "Sardina pilchardus")
fisheries_tidy %>%
filter(asfis_species_name == "Sardina pilchardus", year >= 1990, year <= 2000)
fisheries_tidy %>%
filter(asfis_species_name == "Sardina pilchardus", year >= 1990, year <= 2000) %>%
group_by(country) %>%
summarize(total_sardines = sum(catch)) %>%
arrange(desc(total_sardines))
fisheries_tidy %>%
filter(isscaap_taxonomic_group == "Cephalopod", year >= 2008, year <= 2012) %>%
group_by(country) %>%
summarize(total_cephalopods = sum(catch)) %>%
arrange(desc(total_cephalopods))
fisheries_tidy %>%
filter(isscaap_taxonomic_group == "Cephalopods", year >= 2008, year <= 2012) %>%
group_by(country) %>%
summarize(total_cephalopods = sum(catch)) %>%
arrange(desc(total_cephalopods))
glimpse(fisheries_tidy)
fisheries_tidy %>%
filter(isscaap_taxonomic_group == "Cephalopod", year >= 2008, year <= 2012) %>%
group_by(country) %>%
summarize(total_cephalopods = sum(catch)) %>%
arrange(desc(total_cephalopods))
glimpse(fisheries_tidy)
fisheries_tidy %>%
filter(asfis_species_name == "Cephalopod", year >= 2008, year <= 2012) %>%
group_by(country) %>%
summarize(total_cephalopods = sum(catch)) %>%
arrange(desc(total_cephalopods))
glimpse(fisheries_tidy)
fisheries_tidy %>%
filter(isscaap_taxonomic_group == "Cephalopod", year >= 2008, year <= 2012) %>%
group_by(country) %>%
summarize(total_cephalopods = sum(catch)) %>%
arrange(desc(total_cephalopods))
glimpse(fisheries_tidy)
fisheries_tidy %>%
filter(isscaap_taxonomic_group == "Cephalopoda", year >= 2008, year <= 2012) %>%
group_by(country) %>%
summarize(total_cephalopods = sum(catch)) %>%
arrange(desc(total_cephalopods))
table(fisheries_tidy)
table(fisheries_tidy$isscaap_taxonomic_group)
fisheries_tidy %>%
filter(isscaap_taxonomic_group == "Cephalopoda", year >= 2008, year <= 2012) %>%
group_by(country) %>%
summarize(total_cephalopods = sum(catch)) %>%
arrange(desc(total_cephalopods))
table(fisheries_tidy$asfis_species_name)
fisheries_tidy %>%
filter(isscaap_taxonomic_group == "Cephalopoda", year >= 2008, year <= 2012) %>%
group_by(country) %>%
summarize(total_cephalopods = sum(catch)) %>%
arrange(desc(total_cephalopods))
table(fisheries_tidy$asfis_species_number)
fisheries_tidy %>%
filter(isscaap_taxonomic_group == "Cephalopoda", year >= 2008, year <= 2012) %>%
group_by(country) %>%
summarize(total_cephalopods = sum(catch)) %>%
arrange(desc(total_cephalopods))
glimpse(fisheries)
sum(is.na(fisheries))
colnames(fisheries)
dim(fisheries)
str(fisheries)
table(fisheries$common_name)
glimpse(fisheries)
sum(is.na(fisheries))
colnames(fisheries)
dim(fisheries)
str(fisheries)
table(fisheries$isscaap_group_number)
glimpse(fisheries)
sum(is.na(fisheries))
colnames(fisheries)
dim(fisheries)
str(fisheries)
table(fisheries$isscaap_taxonomic_group)
glimpse(fisheries)
sum(is.na(fisheries))
colnames(fisheries)
dim(fisheries)
str(fisheries)
table(fisheries$asfis_species_name)
fisheries_tidy %>%
filter(asfis_species_name == "Cephalopoda", year >= 2008, year <= 2012) %>%
group_by(country) %>%
summarize(total_cephalopods = sum(catch)) %>%
arrange(desc(total_cephalopods))
fisheries_tidy %>%
group_by(species) %>%
fisheries_tidy %>%
group_by(species)
fisheries_tidy %>%
group_by(asfis_species_name)
fisheries_tidy %>%
group_by(asfis_species_name) %>%
filter(asfis_species_name == "Osteichthyes")
fisheries_tidy %>%
group_by(asfis_species_name) %>%
filter(asfis_species_number == 	199XXXXXXX010)
fisheries_tidy %>%
group_by(asfis_species_name) %>%
filter(asfis_species_number == "199XXXXXXX010")
fisheries_tidy %>%
group_by(asfis_species_name) %>%
filter(iscaap_taxonomic_group != "Marine fishes not identified", year >= 2008, year <= 2012) %>%
summarize(species_catch_sum = sum(catch)) %>%
arrange(desc(species_catch_sum))
fisheries_tidy %>%
group_by(asfis_species_name) %>%
filter(isscaap_taxonomic_group != "Marine fishes not identified", year >= 2008, year <= 2012) %>%
summarize(species_catch_sum = sum(catch)) %>%
arrange(desc(species_catch_sum))
fisheries_tidy %>%
group_by(country) %>%
fisheries_tidy %>%
group_by(country, year) %>%
summarize(catch_year_sum = sum(catch))
fisheries_tidy %>%
group_by(country) %>%
summarize(sum_catch = sum(catch))
fisheries_tidy %>%
group_by(country) %>%
summarize(sum_catch = sum(catch), is.rm = TRUE)
fisheries_tidy %>%
group_by(country) %>%
summarize(sum_catch = sum(catch), na.rm = TRUE)
fisheries_tidy %>%
group_by(country) %>%
summarize(sum_catch = na.rm(sum(catch)))
fisheries_tidy %>%
group_by(country) %>%
summarize(sum_catch = na.omit(sum(catch)))
fisheries_tidy %>%
group_by(country) %>%
na.rm = TRUE %>%
summarize(sum_catch = (sum(catch))
fisheries_tidy %>%
group_by(country) %>%
summarize(sum_catch = (sum(catch, na.rm = TRUE))
fisheries_tidy %>%
group_by(country) %>%
summarize(sum_catch = (sum(catch, na.rm() = TRUE))
fisheries_tidy %>%
group_by(country) %>%
filter(catch, na.rm = TRUE) %>%
summarize(sum_catch = (sum(catch)))
fisheries_tidy %>%
group_by(country) %>%
filter(na.omit(catch)) %>%
summarize(sum_catch = (sum(catch)))
fisheries_tidy %>%
group_by(country) %>%
na.omit(catch) %>%
summarize(sum_catch = (sum(catch)))
fisheries_tidy %>%
group_by(country) %>%
na.omit(catch) %>%
summarize(sum_catch = (sum(catch))) %>%
mutate(avg_catch = sum_catch/mean(year))
fisheries_tidy %>%
group_by(country) %>%
na.omit(catch) %>%
summarize(sum_catch = (sum(catch))) %>%
na.omit(year) %>%
mutate(avg_catch = sum_catch/mean(year))
fisheries_tidy %>%
group_by(country) %>%
na.omit(catch) %>%
summarize(sum_catch = (sum(catch))) %>%
mutate(avg_catch = sum_catch/(((min(year) + max(year)/2))))
fisheries_tidy %>%
filter(asfis_species_name == starts_with("Cephalopoda"), year >= 2008, year <= 2012) %>%
group_by(country) %>%
summarize(total_cephalopods = sum(catch)) %>%
arrange(desc(total_cephalopods))
fisheries_tidy %>%
group_by(country) %>%
na.omit(catch) %>%
summarize(sum_catch = (sum(catch)), avg_year = mean(year)) %>%
mutate(avg_catch = sum_catch/avg_year)
fisheries_tidy %>%
group_by(country) %>%
na.omit(catch) %>%
summarize(sum_catch = (sum(catch), yr_max = max(year), yr_min = min(year)) %>%
fisheries_tidy %>%
group_by(country) %>%
na.omit(catch) %>%
summarize(sum_catch = (sum(catch), yr_max = max(year), yr_min = min(year))) %>%
fisheries_tidy %>%
group_by(country) %>%
na.omit(catch) %>%
summarize(sum_catch = (sum(catch), yr_min = min(year))) %>%
fisheries_tidy %>%
group_by(country) %>%
na.omit(catch) %>%
summarize(sum_catch = (sum(catch)), yr_min = min(year))) %>%
fisheries_tidy %>%
group_by(country) %>%
na.omit(catch) %>%
summarize(sum_catch = (sum(catch)), yr_min = min(year)) %>%
mutate(avg_catch = sum_catch/(yr_max-yr_min))
fisheries_tidy %>%
group_by(country) %>%
na.omit(catch) %>%
summarize(sum_catch = (sum(catch)), yr_min = min(year), yr_max = max(year)) %>%
mutate(avg_catch = sum_catch/(yr_max-yr_min))
